<!DOCTYPE html>
<html>
<head> 
  	<meta charset="utf-8">
  	<meta name="viewport" content="initial-scale=1, width=device-width">
  	
	<title>Market Area: E-Blotter System</title>
	<link rel="icon" type="image/png" href="logo.png">
	<link href="public/=tailwind.css" rel="stylesheet">
  	<link rel="stylesheet"  href="styleRHP.css" />
  	<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=K2D:wght@300;500;800&display=swap" />
  	<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Bebas Neue:wght@400&display=swap" />
  	<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;800&display=swap" />
  	
</head>
<body>
  	<div class="page-container">
  	<div class="written-complaint-appointmen">

		<!-- HEADER SECTION -->
		<header class="header_gradient">
  			<div class="header-left">
    			<img class="market-area-logo" src="logo.png" alt="Logo" />
    			<div class="barangay-title">
      			<p class="barangay-market-area">Barangay Market Area:<br>E-Blotter System</p>
    			</div>
  			</div>

  			<div class="navbar">
  				<div class="nav-links">
    				<a href="residentHomepage.html">Home</a>
    				<a href="my_complaints.html">My Complaints</a>
    				<a href="contact.html">Contacts</a>
  				</div>
  
  			<!-- Profile + Sidebar Wrapper -->
			<div class="profile-sidebar-wrapper">
  			<!-- Profile Trigger -->
  			<div class="profile-link" id="profileTrigger">
    			<div class="profile"></div>
  			</div>

  			<!-- Collapsible Sidebar -->
  			<div class="sidebar collapsed" id="profileSidebar">
				<a href="accounts_security.html" class="sidebar-item" data-tooltip="Adjust your settings">
    				<i class="icon">⚙️</i>
    				<span class="label">Settings</span>
  				</a>
  				<a href="#" class="sidebar-item" id="logout-btn" onclick="return showLogoutConfirmation()" data-tooltip="Log out from your account">
                    <i class="icon">🚪</i>
                    <span class="label">Logout</span>
                </a>

			</div>

			<!-- Notification Popup -->
			<div id="notificationPopup" class="notification-popup">
  				<div class="popup-header">
    				<strong>Notifications</strong>
    				<button class="close-btn" onclick="hidePopup()">✖</button>
  				</div>
  				<ul class="notification-list" id="notificationList">
   					<li>📝 New complaint submitted</li>
    				<li>📢 Barangay update posted</li>
    				<li>👤 Profile approved</li>
  				</ul>
				<button id="clearNotificationsBtn" class="clear-btn">Clear All</button>
				</div>
		</div> 
		</div>
		</header>

		<!-- HERO SECTION -->
		<section class="hero-section" style="min-height: 70vh;">
  			<div class="background-circles">
    			<div class="market_area_bg"></div>

    			<div class="green_circle"></div>
    			<div class="yellow_circle"></div>
  			</div>

  			<div class="hero-content">
    			<div class="welcome-to-barangay">
      				Welcome to Barangay Market Area:<br> E-BLOTTER System
    			</div>
			
			<a href="complaint_form.html">
    		<button class="file_complaint_container" type="button" aria-label="File a Complaint">
  				<div class="file_complaint_button"></div>
  				<div class="file_complaint_icon"></div>
  				<img class="file_complaint_iconimg" src="filing_icon.png" alt="Complaint Icon" />

  				<div class="file-a-complaint-parent">
    			<div class="file-a-complaint">File a Complaint</div>
    			<div class="submit-and-track">
      				Submit and track your concerns directly to barangay officials. Stay informed, stay heard.
    			</div>
  				</div>
			</button>
			</a>
      		</div>
		</section>

		<!-- INFORMATION SECTION -->
		<section style="
			background:#e0e6bf;
			padding: 80px 20px;
			position: relative;
		">
			<div style="
				max-width: 1000px;
				margin: 0 auto;
				position: relative;
				z-index: 1;
			">
				<!-- Section Title -->
				<div style="text-align: center; margin-bottom: 60px;">
					<h2 style="
						font-family: Trebuchet MS;
						font-size: clamp(2.5rem, 5vw, 4rem);
						font-weight: 900;
						color: #2b3209;
						margin-bottom: 20px;
						letter-spacing: 3px;
						text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
					">About Our E-Blotter System</h2>
					
					<!-- Simple divider -->
					<div style="
						display: flex;
						align-items: center;
						justify-content: center;
						gap: 15px;
						margin: 20px auto;
					">
						<div style="
							width: 50px;
							height: 2px;
							background: #6a7337;
							border-radius: 1px;
						"></div>
						<div style="
							width: 12px;
							height: 12px;
							background: #d0b564;
							border-radius: 50%;
							border: 2px solid #6a7337;
						"></div>
						<div style="
							width: 100px;
							height: 4px;
							background: linear-gradient(90deg, #6a7337, #d0b564);
							border-radius: 2px;
						"></div>
						<div style="
							width: 12px;
							height: 12px;
							background: #6a7337;
							border-radius: 50%;
							border: 2px solid #d0b564;
						"></div>
						<div style="
							width: 50px;
							height: 2px;
							background: #d0b564;
							border-radius: 1px;
						"></div>
					</div>
					
					<!-- Subtitle -->
					<p style="
						font-size: 1rem;
						color: #4b5320;
						max-width: 600px;
						margin: 0 auto;
						line-height: 1.6;
						background: white;
						padding: 15px 25px;
						border-radius: 10px;
						border: 1px solid rgba(106, 115, 55, 0.1);
						box-shadow: 0 2px 8px rgba(0,0,0,0.05);
						font-family: sans-serif;
					">
						Digitalizing community reporting through digital innovation and transparency
					</p>
				</div>

				<!-- Main Content Grid -->
				<div style="
					display: grid;
					grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
					gap: 30px;
					margin-bottom: 60px;
				">
					<!-- What is E-Blotter Card -->
					<div style="
						background: white;
						border-radius: 15px;
						padding: 30px;
						text-align: center;
						box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
						border: 1px solid rgba(106, 115, 55, 0.1);
						transition: transform 0.3s ease;
					" onmouseover="this.style.transform='translateY(-5px)'" onmouseout="this.style.transform='translateY(0)'">
						
						<!-- Simple icon -->
						<div style="
							width: 70px;
							height: 70px;
							background: linear-gradient(135deg, #6a7337, #4b5320);
							border-radius: 50%;
							display: flex;
							align-items: center;
							justify-content: center;
							margin: 0 auto 20px;
							box-shadow: 0 4px 12px rgba(106, 115, 55, 0.3);
						">
							<span style="font-size: 30px; color: white;">📋</span>
						</div>
						
						<h3 style="
							font-family: sans-serif;
							font-size: 1.5rem;
							font-weight: 700;
							color: #2b3209;
							margin-bottom: 15px;
						">What is E-Blotter?</h3>
						
						<p style="
							color: #4b5320;
							line-height: 1.6;
							font-size: 0.95rem;
							font-family: sans-serif;
						">
							The E-Blotter System is a digital platform that allows residents to file complaints, incidents, and concerns online. It replaces traditional paper-based reporting with a modern, efficient, and transparent system that ensures faster response times and better tracking of cases.
						</p>
					</div>

					<!-- How It Works Card -->
					<div style="
						background: white;
						border-radius: 15px;
						padding: 30px;
						text-align: center;
						box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
						border: 1px solid rgba(208, 181, 100, 0.2);
						transition: transform 0.3s ease;
					" onmouseover="this.style.transform='translateY(-5px)'" onmouseout="this.style.transform='translateY(0)'">
						
						<!-- Simple icon -->
						<div style="
							width: 70px;
							height: 70px;
							background: linear-gradient(135deg, #d0b564, #bd8f42);
							border-radius: 50%;
							display: flex;
							align-items: center;
							justify-content: center;
							margin: 0 auto 20px;
							box-shadow: 0 4px 12px rgba(208, 181, 100, 0.4);
						">
							<span style="font-size: 30px; color: white;">⚡</span>
						</div>
						
						<h3 style="
							font-family: sans-serif;
							font-size: 1.5rem;
							font-weight: 700;
							color: #2b3209;
							margin-bottom: 20px;
						">How It Works</h3>
						
						<div style="text-align: left;">
							<div style="display: flex; align-items: center; margin-bottom: 12px;">
								<span style="
									background: linear-gradient(135deg, #6a7337, #4b5320);
									color: white;
									width: 25px;
									height: 25px;
									border-radius: 50%;
									display: flex;
									align-items: center;
									justify-content: center;
									font-size: 12px;
									font-weight: bold;
									margin-right: 15px;
									flex-shrink: 0;
								">1</span>
								<span style="color: #2b3209; font-size: 0.9rem; font-family: sans-serif;">Create your account and log in</span>
							</div>
							<div style="display: flex; align-items: center; margin-bottom: 12px;">
								<span style="
									background: linear-gradient(135deg, #d0b564, #bd8f42);
									color: white;
									width: 25px;
									height: 25px;
									border-radius: 50%;
									display: flex;
									align-items: center;
									justify-content: center;
									font-size: 12px;
									font-weight: bold;
									margin-right: 15px;
									flex-shrink: 0;
								">2</span>
								<span style="color: #2b3209; font-size: 0.9rem; font-family: sans-serif;">Fill out the complaint form with details</span>
							</div>
							<div style="display: flex; align-items: center; margin-bottom: 12px;">
								<span style="
									background: linear-gradient(135deg, #6a7337, #4b5320);
									color: white;
									width: 25px;
									height: 25px;
									border-radius: 50%;
									display: flex;
									align-items: center;
									justify-content: center;
									font-size: 12px;
									font-weight: bold;
									margin-right: 15px;
									flex-shrink: 0;
								">3</span>
								<span style="color: #2b3209; font-size: 0.9rem; font-family: sans-serif;">Submit and receive confirmation</span>
							</div>
							<div style="display: flex; align-items: center;">
								<span style="
									background: linear-gradient(135deg, #d0b564, #bd8f42);
									color: white;
									width: 25px;
									height: 25px;
									border-radius: 50%;
									display: flex;
									align-items: center;
									justify-content: center;
									font-size: 12px;
									font-weight: bold;
									margin-right: 15px;
									flex-shrink: 0;
								">4</span>
								<span style="color: #2b3209; font-size: 0.9rem; font-family: sans-serif;">Track your complaint status online</span>
							</div>
						</div>
					</div>
				</div>

				<!-- Services Grid -->
				<div style="
					display: grid;
					grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
					gap: 25px;
					margin-bottom: 40px;
				">

					<!-- Service Card 2 -->
					<div style="
						background: white;
						border-radius: 12px;
						padding: 25px;
						text-align: center;
						box-shadow: 0 3px 12px rgba(0, 0, 0, 0.06);
						border: 1px solid rgba(208, 181, 100, 0.2);
						transition: transform 0.3s ease;
					" onmouseover="this.style.transform='translateY(-3px)'" onmouseout="this.style.transform='translateY(0)'">
						<div style="
							width: 50px;
							height: 50px;
							background: linear-gradient(135deg, #d0b564, #bd8f42);
							border-radius: 50%;
							display: flex;
							align-items: center;
							justify-content: center;
							margin: 0 auto 15px;
							box-shadow: 0 3px 8px rgba(208, 181, 100, 0.4);
						">
							<span style="font-size: 20px; color: white;">🏘️</span>
						</div>
						<h4 style="
							font-family: sans-serif;
							font-size: 1.1rem;
							font-weight: 700;
							color: #2b3209;
							margin-bottom: 8px;
						">Community Issues</h4>
						<p style="color: #4b5320; font-size: 0.85rem; line-height: 1.4; font-family: sans-serif;">
							Report neighborhood concerns, disputes, and community-related problems.
						</p>
					</div>

					
		</section>

		<!--FOOTER SECTION-->
		<footer class="footer">
  			<div class="footer-left">
    			<img class="market-area-logo2" src="logo.png" alt="Barangay Logo" />
    			<p class="a-barangay-that">
      				A Barangay that is God-centered, united, service-oriented, inclusive, and responsive — guided by faith, integrity, and accountable governance.
    			</p>
  			</div>

  			<!-- Any left/center content here -->
 
  			<div class="footer-right-group">
    			<div class="footer-middle">
      		 	<h4 class="footer-heading">Quick Links</h4>
      		 	<p class="footer-link"><a href="my_complaints.html" id="footer-link">My Complaints</a></p>
              	<p class="footer-link"><a href="contact.html" id="footer-link">Contacts</a></p>
              	<p class="footer-link"><a href="accounts_security.html" id="footer-link">Settings</a></p>
    		</div>

    		<div class="footer-right">
      			<h4 class="footer-heading">Site Info</h4>
      			<p class="footer-link"><a href="privpolicy.html" id="footer-link"> Policy</a></p>
      			<p class="footer-link"> <a href="term&con.html" id="footer-link">Terms & Conditions</a></p>
    		</div> 
  		</div>
		</div>

		</footer>

  	</div>
  	
  	<!-- Toast Container -->
	<div id="toastContainer" class="toast-container"></div>	
</div>

<!-- Enhanced Logout Modal -->
    <div id="logoutConfirmModal" class="out-custom-modal">
        <div class="out-modal-content">
            <button class="close-out-btn" onclick="hideLogoutModal()" aria-label="Close">&times;</button>
            
            <div class="out-modal-icon">
                <span>🚪</span>
            </div>
            
            <h2 class="out-modal-title">Confirm Logout</h2>
            <p class="out-modal-message">
                Are you sure you want to logout? You will need to sign in again to access your account.
            </p>
            
            <div class="out-modal-buttons">
                <button class="out-btn out-btn-cancel" onclick="hideLogoutModal()">
                    Cancel
                </button>
                <button class="out-btn out-btn-confirm" onclick="proceedWithLogout()">
                    Yes, Logout
                </button>
            </div>
        </div>
    </div>

<script>
  const profileTrigger = document.getElementById('profileTrigger');
  const sidebar = document.getElementById('profileSidebar');

  profileTrigger.addEventListener('click', (e) => {
    e.preventDefault(); // prevent anchor from navigating
    sidebar.classList.toggle('show');
  });

  document.addEventListener('click', function (e) {
    const wrapper = document.querySelector('.profile-sidebar-wrapper');
    if (!wrapper.contains(e.target)) {
      sidebar.classList.remove('show');
    }
  });

 function confirmLogout() {
  document.getElementById('logoutModal').style.display = 'flex';
  return false; // Prevent the <a> tag from redirecting
}

function closeLogoutModal() {
  document.getElementById('logoutModal').style.display = 'none';
}

function confirmLogoutAction() {
  window.location.href = "residentLogin.html"; // ✅ your original destination
};

// ==== ENHANCED LOGOUT CONFIRMATION ====
        
        function showLogoutConfirmation() {
            const logoutModal = document.getElementById('logoutConfirmModal');
            logoutModal.style.display = 'flex';
            
            // Add show class after a brief delay for smooth animation
            setTimeout(() => {
                logoutModal.classList.add('show');
            }, 10);
            
            // Prevent body scroll when modal is open
            document.body.style.overflow = 'hidden';
            
            // Focus trap for accessibility
            trapFocus(logoutModal);
            
            return false; // Prevent the <a> tag from redirecting
        }

        function hideLogoutModal() {
            const logoutModal = document.getElementById('logoutConfirmModal');
            logoutModal.classList.remove('show');
            
            // Hide modal after animation completes
            setTimeout(() => {
                logoutModal.style.display = 'none';
                document.body.style.overflow = ''; // Restore body scroll
            }, 300);
        }

        function proceedWithLogout() {
            // Show loading state
            const confirmBtn = document.querySelector('.out-btn-confirm');
            const originalText = confirmBtn.textContent;
            confirmBtn.textContent = 'Logging out...';
            confirmBtn.disabled = true;
            
            // Simulate logout process (replace with your actual logout logic)
            setTimeout(() => {
                // Redirect to login page
                window.location.href = "residentLogin.html";
            }, 1000);
        }

        // Enhanced Features
        
        // Close modal when clicking outside
        document.getElementById('logoutConfirmModal').addEventListener('click', function(e) {
            if (e.target === this) {
                hideLogoutModal();
            }
        });

        // Close modal with Escape key
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                hideLogoutModal();
            }
        });

        // Focus trap for accessibility
        function trapFocus(logoutModal) {
            const focusableElements = logoutModal.querySelectorAll(
                'button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'
            );
            const firstElement = focusableElements[0];
            const lastElement = focusableElements[focusableElements.length - 1];

            logoutModal.addEventListener('keydown', function(e) {
                if (e.key === 'Tab') {
                    if (e.shiftKey) {
                        if (document.activeElement === firstElement) {
                            lastElement.focus();
                            e.preventDefault();
                        }
                    } else {
                        if (document.activeElement === lastElement) {
                            firstElement.focus();
                            e.preventDefault();
                        }
                    }
                }
            });

            // Focus first element
            firstElement.focus();
        }

        // Optional: Auto-close after inactivity
        let logoutInactivityTimer;
        
        function resetLogoutInactivityTimer() {
            clearTimeout(logoutInactivityTimer);
            logoutInactivityTimer = setTimeout(() => {
                if (document.getElementById('logoutConfirmModal').style.display === 'flex') {
                    hideLogoutModal();
                }
            }, 30000); // Auto-close after 30 seconds of inactivity
        }

        // Reset timer on user interaction
        ['mousedown', 'mousemove', 'keypress', 'scroll', 'touchstart'].forEach(event => {
            document.addEventListener(event, resetLogoutInactivityTimer, true);
        });

  //notifications
  
  let notifCount = 0;
const badge = document.getElementById("notifBadge");
const toastContainer = document.getElementById("toastContainer");
const notifItem = document.getElementById("notifItem");
const popup = document.getElementById("notificationPopup");
const notificationList = document.getElementById("notificationList");

// Update badge
function updateNotificationCount(count) {
  notifCount = count;
  if (notifCount > 0) {
    badge.textContent = notifCount;
    badge.style.display = 'inline-block';
  } else {
    badge.textContent = '';
    badge.style.display = 'none';
  }
}

// Show toast
function showToast(message) {
  const toast = document.createElement("div");
  toast.className = "toast";
  toast.textContent = message;
  toastContainer.appendChild(toast);

  // Remove after 4s
  setTimeout(() => toast.remove(), 4000);
}

// Add notification to popup list
function addNotificationToList(message) {
  const li = document.createElement("li");
  li.textContent = message;
  notificationList.prepend(li); // newest on top
}

// Simulate notifications every 5s
setInterval(() => {
  notifCount++;
  const msg = `🔔 New notification #${notifCount}`;
  updateNotificationCount(notifCount);
  showToast(msg);
  addNotificationToList(msg);
}, 10000);

// Toggle popup
notifItem.addEventListener("click", function (e) {
  e.preventDefault();
  popup.style.display = popup.style.display === "block" ? "none" : "block";
  updateNotificationCount(0); // optional: reset badge when opened
});

// Close popup button
function hidePopup() {
  popup.style.display = "none";
}

// Hide popup when clicking outside
document.addEventListener("click", function (e) {
  if (!popup.contains(e.target) && !notifItem.contains(e.target)) {
    popup.style.display = "none";
  }
});

const clearBtn = document.getElementById("clearNotificationsBtn");

clearBtn.addEventListener("click", () => {
  notificationList.innerHTML = "";       // Clears the list
  updateNotificationCount(0);            // Resets badge
});

hidePopup(); // Add this inside the clearBtn click function

// active nav
        function setActiveNav() {
            // Get current page from URL
            const currentPage = window.location.pathname.split('/').pop().replace('.html', '');
            
            // Remove active class from all nav links
            const navLinks = document.querySelectorAll('.nav-links a');
            navLinks.forEach(link => link.classList.remove('active'));
            
            // Add active class to current page link
            const activeLink = document.querySelector(`[data-page="${currentPage}"]`);
            if (activeLink) {
                activeLink.classList.add('active');
            }
        }

        // Alternative method using href matching
        function setActiveNavByHref() {
            const navLinks = document.querySelectorAll('.nav-links a');
            const currentPath = window.location.pathname;
            
            navLinks.forEach(link => {
                link.classList.remove('active');
                // Check if the link href matches current path
                if (link.getAttribute('href') === currentPath.split('/').pop()) {
                    link.classList.add('active');
                }
            });
        }

		// active navigation

		document.addEventListener("DOMContentLoaded", function() {
  const navLinks = document.querySelectorAll('.nav-links a');
  const currentPage = window.location.pathname.split("/").pop().toLowerCase();

  navLinks.forEach(link => {
    const linkPage = link.getAttribute('href').toLowerCase();

    // If the current page matches the link href filename, set it active
    if (currentPage === linkPage) {
      link.classList.add('active');
    }

    // Optional: If user is on root (like localhost/), make Home active
    if ((currentPage === "" || currentPage === "index.html") && linkPage.includes("residenthomepage.html")) {
      link.classList.add('active');
    }
  });
});

</script>

</body>
</html>