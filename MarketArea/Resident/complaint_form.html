<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>E-Blotter Information Form</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="cform.css">
  <link rel="icon" type="image/png" href="logo.png">
</head>
<body>

  <!-- HEADER SECTION -->
  <header class="header_gradient">
    <div class="header-left">
      <img class="market-area-logo" src="logo.png" alt="Logo" />
      <div class="barangay-title">
        <p class="barangay-market-area">Barangay Market Area:<br>E-Blotter System</p>
      </div>
    </div>

    <div class="navbar">
      <div class="nav-links">
        <a href="residentHomepage.html">Home</a>
        <a href="my_complaints.html">My Complaints</a>
        <a href="contact.html">Contacts</a>
      </div>

      <!-- Profile + Sidebar Wrapper -->
      <div class="profile-sidebar-wrapper">
        <div class="profile-link" id="profileTrigger">
          <div class="profile"></div>
        </div>

        <!-- Collapsible Sidebar -->
  			<div class="sidebar collapsed" id="profileSidebar">
  				<a href="profile.html" class="sidebar-item" data-tooltip="View your profile">
    				<i class="icon">üë§</i>
    				<span class="label">Profile</span>
  				</a>
				<a href="resident_notifications.html" class="sidebar-item" id="notifItem" data-tooltip="View notifications">
  					<i class="icon">üîî</i>
  					<span class="label">Notifications</span>
  					<span class="notif-badge" id="notifBadge">0</span>
				</a>
  				<a href="settings.html" class="sidebar-item" data-tooltip="Adjust your settings">
    				<i class="icon">‚öôÔ∏è</i>
    				<span class="label">Settings</span>
  				</a>
  				<a href="accounts_security.html" class="sidebar-item" data-tooltip="Manage your account and privacy">
    				<i class="icon">üîê</i>
    				<span class="label">Account & Security</span>
  				</a>
  				<a href="residentLogin.html" class="sidebar-item" id="logout-btn" data-tooltip="Log out from your account">
    				<i class="icon">‚èª</i>
    				<span class="label">Logout</span>
  				</a>
			</div>

			<!-- Notification Popup -->
			<div id="notificationPopup" class="notification-popup">
  				<div class="popup-header">
    				<strong>Notifications</strong>
    				<button class="close-btn" onclick="hidePopup()">‚úñ</button>
  				</div>
  				<ul class="notification-list" id="notificationList">
   					<li>üìù New complaint submitted</li>
    				<li>üì¢ Barangay update posted</li>
    				<li>üë§ Profile approved</li>
  				</ul>
				<button id="clearNotificationsBtn" class="clear-btn">Clear All</button>
				</div>

			</div>
      </div>
    </div>
  </header>

  <section class="page-container">
    <main class="form-container">
      <form id="blotter-form" class="e-blotter-form">
        <h2>E-Blotter Information Form</h2>
        <p class="instruction">Fill all input fields.</p>

        <div class="blotter-progress-container">
          <div class="blotter-progress-line">
            <div class="blotter-step active">Personal Info</div>
            <div class="blotter-step">Complaint</div>
            <div class="blotter-step">Evidence</div>
          </div>
        </div>

        <!-- Personal Information -->
        <fieldset class="form-step active">
  <legend class="section-title">Complainant Personal Information</legend>

  <!-- 2-Column Group -->
  <div class="form-row">
    <div class="form-col">
      <label>Last Name
        <input type="text" placeholder="Last Name" required>
      </label>
    </div>
    <div class="form-col">
      <label>First Name
        <input type="text" placeholder="First Name" required>
      </label>
    </div>
  </div>

  <div class="form-row">
    <div class="form-col">
      <label>Middle Name
        <input type="text" placeholder="Middle Name" required>
      </label>
    </div>
    <div class="form-col">
      <label>Suffix
        <input type="text" placeholder="Suffix">
      </label>
    </div>
  </div>

  <div class="form-row">
    <div class="form-col">
      <label>Sex
        <select name="Sex" id="Sex" required>
          <option value="" selected disabled>Sex</option>
          <option value="Male">Male</option>
          <option value="Female">Female</option>
          <option value="Other">Other</option>
        </select>
      </label>
    </div>
    <div class="form-col">
      <label>Age
        <input type="text" placeholder="Age" required>
      </label>
    </div>
  </div>

  <!-- Full-width row -->
  <div class="form-row">
    <div class="form-col full-width">
      <label>Address
        <input type="text" placeholder="Address" required>
      </label>
    </div>
  </div>

  <div class="form-row">
    <div class="form-col">
      <label>Occupation
        <input type="text" placeholder="Occupation" required>
      </label>
    </div>
    <div class="form-col">
      <label>Contact Number
        <input type="text" placeholder="Contact Number" required>
      </label>
    </div>
  </div>
</fieldset>


        <!-- Complaint Details -->
        <fieldset class="form-step">
          <legend class="section-title">Complaint Details</legend>
          <div class="row">
            <select required>
              <option value="" selected disabled>Select type of complaint</option>
              <option value="Noise">Noise</option>
              <option value="Vandalism">Vandalism</option>
              <option value="Neighbourhood Dispute">Neighbourhood Dispute</option>
              <option value="Unpaid Debt">Unpaid Debt</option>
              <option value="Other">Other</option>
            </select>
            <input type="text" placeholder="Location of the Incident" required>
          </div>
          <div class="row">
            <input type="date" required>
            <input type="time" required>
          </div>
          <div class="row">
            <input type="text" placeholder="Full Name of the Respondent" required>
            <input type="text" placeholder="Address of the Respondent" required>
            <input type="text" placeholder="Contact of the Respondent" required>
          </div>
          <textarea placeholder="Detailed Description of the Incident" required></textarea>
        </fieldset>

        <!-- Supporting Evidence -->
        <fieldset class="form-step">
          <legend class="section-title">Supporting Evidence</legend>
          <div class="upload-section">
            <label for="evidenceFiles">Photos, videos or screenshots for evidence</label>
            <input type="file" id="evidenceFiles" name="evidenceFiles" accept="image/*,video/*" multiple>
            <p class="small-note">You may select multiple images or videos.</p>
          </div>
          <div class="witness-section">
            <label>Witness (N/A if none)</label>
            <div class="witness-row">
              <div class="witness-column">
                <input type="text" placeholder="Name">
                <input type="text" placeholder="Contact Number">
              </div>
              <div class="witness-column">
                <input type="text" placeholder="Name">
                <input type="text" placeholder="Contact Number">
              </div>
            </div>
          </div>

          <!-- Terms and Conditions Checkbox -->
        <div class="terms-container">
          <input type="checkbox" id="terms-checkbox" required>
          <label for="terms-checkbox">
            I agree to the <a href="term&con.html">Terms and Conditions</a>
          </label>
        </div>
        </fieldset>

        <div class="form-nav-center">
          <button type="button" class="nav-btn prev-btn" onclick="prevStep()">Previous</button>
          <button type="button" class="nav-btn next-btn" onclick="nextStep()">Next</button>
          <button type="submit" class="submit-btn nav-btn">Submit Complaint</button>
        </div>
      </form>
    </main>
  </section>

  <!-- FOOTER SECTION -->
  <footer class="footer">
    <div class="footer-left">
      <img class="market-area-logo2" src="logo.png" alt="Barangay Logo" />
      <p class="a-barangay-that">
        A Barangay that is God-centered, united, service-oriented, inclusive, and responsive ‚Äî guided by faith, integrity, and accountable governance.
      </p>
    </div>
    <div class="footer-right-group">
      <div class="footer-middle">
       <h4 class="footer-heading">Quick Links</h4>
        <p class="footer-link"><a href="my_complaints.html" id="footer-link">My Complaints</a></p>
        <p class="footer-link"><a href="contact.html" id="footer-link">Contacts</a></p>
        <p class="footer-link"><a href="settings.html" id="footer-link">Settings</a></p>
      </div>
      <div class="footer-right">
        <h4 class="footer-heading">Site Info</h4>
        <p class="footer-link"><a href="privpolicy.html">Policy</a></p>
        <p class="footer-link"><a href="term&con.html">Terms & Conditions</a></p>
        
      </div>
    </div>
  </footer>

  <script>
    const profileTrigger = document.getElementById('profileTrigger');
    const sidebar = document.getElementById('profileSidebar');

    profileTrigger.addEventListener('click', (e) => {
      e.preventDefault();
      sidebar.classList.toggle('show');
    });

    document.addEventListener('click', function (e) {
      const wrapper = document.querySelector('.profile-sidebar-wrapper');
      if (!wrapper.contains(e.target)) {
        sidebar.classList.remove('show');
      }
    });

    document.getElementById('logout-btn').addEventListener('click', function (e) {
      e.preventDefault();
      if (confirm("Are you sure you want to log out?")) {
        window.location.href = this.href;
      }
    });

    const steps = document.querySelectorAll('.form-step');
    const progressSteps = document.querySelectorAll('.blotter-step');
    const prevBtn = document.querySelector('.prev-btn');
    const nextBtn = document.querySelector('.next-btn');
    const submitBtn = document.querySelector('.submit-btn');

    let currentStep = 0;

    function updateFormSteps() {
      steps.forEach((step, index) => {
        step.style.display = index === currentStep ? 'block' : 'none';
      });

      progressSteps.forEach((step, index) => {
        step.classList.toggle('active', index === currentStep);
      });

      prevBtn.disabled = currentStep === 0;
      nextBtn.style.display = currentStep === steps.length - 1 ? 'none' : 'inline-block';
      submitBtn.style.display = currentStep === steps.length - 1 ? 'inline-block' : 'none';
    }

    function nextStep() {
      const currentInputs = steps[currentStep].querySelectorAll('input, select, textarea');
      for (let input of currentInputs) {
        if (!input.checkValidity()) {
          input.reportValidity();
          return;
        }
      }

      if (currentStep < steps.length - 1) {
        currentStep++;
        updateFormSteps();
      }
    }

    function prevStep() {
      if (currentStep > 0) {
        currentStep--;
        updateFormSteps();
      }
    }

    updateFormSteps();

    const form = document.getElementById('blotter-form');
    form.addEventListener('submit', function(e) {
      e.preventDefault();

      const personalInfoInputs = steps[0].querySelectorAll('input, select');
      const complaintDetailsInputs = steps[1].querySelectorAll('input, select, textarea');

      for (let input of [...personalInfoInputs, ...complaintDetailsInputs]) {
        if (!input.checkValidity()) {
          if (steps[0].contains(input)) {
            currentStep = 0;
          } else {
            currentStep = 1;
          }
          updateFormSteps();
          input.reportValidity();
          return;
        }
      }

      if (!document.getElementById('terms-checkbox').checked) {
        alert('Please agree to the Terms and Conditions.');
        return;
      }

      alert('Your complaint has been submitted successfully.');
      form.reset();
      currentStep = 0;
      updateFormSteps();
    });

    //notifications
  
  let notifCount = 0;
const badge = document.getElementById("notifBadge");
const toastContainer = document.getElementById("toastContainer");
const notifItem = document.getElementById("notifItem");
const popup = document.getElementById("notificationPopup");
const notificationList = document.getElementById("notificationList");

// Update badge
function updateNotificationCount(count) {
  notifCount = count;
  if (notifCount > 0) {
    badge.textContent = notifCount;
    badge.style.display = 'inline-block';
  } else {
    badge.textContent = '';
    badge.style.display = 'none';
  }
}

// Show toast
function showToast(message) {
  const toast = document.createElement("div");
  toast.className = "toast";
  toast.textContent = message;
  toastContainer.appendChild(toast);

  // Remove after 4s
  setTimeout(() => toast.remove(), 4000);
}

// Add notification to popup list
function addNotificationToList(message) {
  const li = document.createElement("li");
  li.textContent = message;
  notificationList.prepend(li); // newest on top
}

// Simulate notifications every 5s
setInterval(() => {
  notifCount++;
  const msg = `üîî New notification #${notifCount}`;
  updateNotificationCount(notifCount);
  showToast(msg);
  addNotificationToList(msg);
}, 10000);

// Toggle popup
notifItem.addEventListener("click", function (e) {
  e.preventDefault();
  popup.style.display = popup.style.display === "block" ? "none" : "block";
  updateNotificationCount(0); // optional: reset badge when opened
});

// Close popup button
function hidePopup() {
  popup.style.display = "none";
}

// Hide popup when clicking outside
document.addEventListener("click", function (e) {
  if (!popup.contains(e.target) && !notifItem.contains(e.target)) {
    popup.style.display = "none";
  }
});

const clearBtn = document.getElementById("clearNotificationsBtn");

clearBtn.addEventListener("click", () => {
  notificationList.innerHTML = "";       // Clears the list
  updateNotificationCount(0);            // Resets badge
});

hidePopup(); // Add this inside the clearBtn click function
  </script>

</body>
</html>
